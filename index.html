<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" type="text/css" href="build/mirador/css/mirador-combined.css">
    <title>Mirador Viewer</title>
    <style type="text/css">
    body {
      font-size: 70%;
    }
     #viewer {
       width: 100%;
       height: 100%;
       position: fixed;
     }
    </style>
  </head>
  <body>
    <div id="viewer"></div>

    <script src="build/mirador/mirador.js"></script>
    <script type="text/javascript">

      $(function() {
        function getParameterByName(name, url) {
          if (!url) {
            url = window.location.href;
          }
          name = name.replace(/[\[\]]/g, "\\$&");
          var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
              results = regex.exec(url);
          if (!results) return null;
          if (!results[2]) return '';
          return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        let init = {
          "id": "viewer",
          "layout": "1x1",
          "data": [
            // {"collectionUri": "http://localhost:8080/iiif-pres/aorcollection/collection"}
            {"collectionUri": "http://localhost:8080/iiif-pres/aor/collection"}
          ],
          "mainMenuSettings": {
            "userLogo": {
              "label": "Digital Scholarly Library Viewer",
              "attributes": { "id": "logo-title", "href": "http://dlmm.sharedblogs.library.jhu.edu/", "target": "_blank" }
            },
            "userButtons": [
              {
                "label": "About the Viewer",
                "iconClass": "fa fa-fw fa-lg fa-book",
                "attributes": {
                  "href": "http://dlmm.sharedblogs.library.jhu.edu/en/digital-library-of-medieval-manuscripts/the-iiif-viewer/",
                  "title": "Background about the viewer and how to use it.",
                  "target": "_blank"
                },
              }
            ]
          },
          "windowObjects": [],
          "openManifestsPage": true,
          "preserveManifestOrder": true,
          "showAddFromURLBox": false,
          "windowSettings": {
            "viewIconChangesToCurrentView": false,
            "sidePanelOptions": {
              "toc": false,
              "annotation": true,
              "search": true
            },
            "canvasControls": {
              "annotations" : {
                "annotationLayer" : false,
                "annotationCreation" : false
              },
              "imageManipulation": {
                "controls": {
                  "rotate": false
                }
              }
            },
            "layoutOptions": {
              "newObject": false,
              "close": false
            }
          },
          "manifestList": {
            "maxThumbs": 3,
            "enableSearch": true,
            "enableFacets": true,
            // "showLogos": false,
            "search": {
              "showCollectionPicker": false,
              "showDescription": false
            }
          }
        };

        let loadedCol = getParameterByName("col");
        if (loadedCol && loadedCol.length > 0) {
          init.initialCollection = loadedCol;
        }

        let openBook = getParameterByName("book");
        if (openBook && openBook.length > 0) {
          init.windowObjects = {
            "loadedManifest": openBook
          };
        }

        // Called without "let" or "var" so we can play with it in the browser
        myMiradorInstance = Mirador(init);
      });
    </script>
    // This enables live reloading of assets for improved developer experience.
    // Remove if copying this page as a basis for another project.
    <script src="//localhost:35729/livereload.js"></script>
  </body>
</html>
